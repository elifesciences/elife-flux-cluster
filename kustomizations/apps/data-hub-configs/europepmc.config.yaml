europePmc:
  - dataPipelineId: europepmc_data_pipeline_preprint_servers
    source:
      apiUrl: 'https://www.ebi.ac.uk/europepmc/webservices/rest/search'
      search:
        query: '(PUBLISHER:"bioRxiv" OR PUBLISHER:"medRxiv" OR PUBLISHER:"Research Square" OR PUBLISHER:"arXiv" OR PUBLISHER:"SSRN" OR PUBLISHER:"PsyArXiv" OR PUBLISHER:"OSF Preprints" OR PUBLISHER:"Lancet Preprints" OR PUBLISHER:"Authorea Preprints" OR PUBLISHER:"ChemRxiv")'
        pageSize: '1000'
      maxDays: 1  # limit the number of days to process from start date
    target:
      projectName: 'elife-data-pipeline'
      datasetName: '{ENV}'
      tableName: europepmc_preprint_servers_responses
    state:
      initialState:
        startDate: '2011-01-01'
      stateFile:
        bucketName: '{ENV}-elife-data-pipeline'
        objectName: 'airflow-config/europepmc/preprint_servers/{ENV}-state.json'
    batchSize: 10000
  - dataPipelineId: europepmc_data_pipeline_preprint_servers_v2
    source:
      apiUrl: 'https://www.ebi.ac.uk/europepmc/webservices/rest/search'
      search:
        query: '(PUBLISHER:"bioRxiv" OR PUBLISHER:"medRxiv" OR PUBLISHER:"Research Square" OR PUBLISHER:"arXiv" OR PUBLISHER:"SSRN" OR PUBLISHER:"PsyArXiv" OR PUBLISHER:"OSF Preprints" OR PUBLISHER:"Lancet Preprints" OR PUBLISHER:"Authorea Preprints" OR PUBLISHER:"ChemRxiv")'
        pageSize: '1000'
      extractIndividualResultsFromResponse: False
      maxDays: 1  # limit the number of days to process from start date
    target:
      projectName: 'elife-data-pipeline'
      datasetName: '{ENV}'
      tableName: europepmc_preprint_servers_responses_v2
    state:
      initialState:
        startDate: '2022-10-01'
      stateFile:
        bucketName: '{ENV}-elife-data-pipeline'
        objectName: 'airflow-config/europepmc/preprint_servers/{ENV}-state-v2.json'
    batchSize: 10
